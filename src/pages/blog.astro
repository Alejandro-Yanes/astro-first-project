---
import Layout from "../layouts/Layout.astro";
import Card from "../components/Card.astro";
import Showcase from "../components/Showcase.astro";

// const response = await fetch('https://jsonplaceholder.typicode.com/posts?_limit=5')
// const posts = await response.json()

const posts = await Astro.glob('../posts/*.md')


---

<Layout title="Astro Blog">
    <Showcase heading="Astro Blog" text="A simple blog build with astro" />
    <section class="page-content">
        <div>
            <h1>testing</h1>
        </div>
        <div class="container">
            {posts.map(post => (
                <Card>
                    <h3>{post.frontmatter.title}</h3>
                    <p>{post.frontmatter.excerpt}</p>
                    <a class="btn" href={`/${post.frontmatter.slug}`}>Read More</a>
                    <div >
                Written by {post.frontmatter.author} on {new Date(post.frontmatter.date).toLocaleString()}
            </div>
                    </Card>
            ))}
        </div>
    </section>
</Layout>